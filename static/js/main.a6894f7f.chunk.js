(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){e.exports=t(98)},45:function(e,n,t){},46:function(e,n,t){e.exports=t.p+"static/media/logo.43f13564.svg"},98:function(e,n,t){"use strict";t.r(n);var o=t(5),r=t.n(o),i=t(34),a=t.n(i),c=(t(45),t(46),t(22),t(17)),u=t(8),l=t.n(u),s=t(11),f=t(35),d=t(36),h=t(39),m=t(37),p=t(40),v=t(16),g=t.n(v);function _(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e}function w(e){return e.length>0?e[_(0,e.length-1)]:null}var E=t(38),y=t(15),x=t.n(y),b=.2,k=100,M=k/3,O=function(){var e=Object(s.a)(l.a.mark(function e(n,t){var o,r,i=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=i.length>2&&void 0!==i[2]?i[2]:0,r=0;case 2:if(!(r<t)){e.next=10;break}return console.log("%cTIME_STEP: ".concat(r),"color: yellow; font-style: italic; background-color: blue;padding: 2px"),n.map(function(e){return R(e,n)}),e.next=7,Object(E.delay)(o);case 7:r++,e.next=2;break;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),S=function(e){for(var n=[],t=0;t<e;t++)n.push(Y());return n},W=function(e,n){n.forEach(function(n){n.id===e.id&&(n.chief_age=_(12,45))})},R=function(e,n){if(B(e,n),function(e){var n=Math.random()<=e.chief_age/100-.3;return n&&console.log("DEATH: ".concat(e.name,"'s Chief has died")),n}(e))!function(e,n){var t=Q(e,n),o=_(0,t.length);console.log("DISMANTLE: ".concat(o," communities have decided to leave ").concat(e.name,".")),t.map(function(e,t){t<=o-1&&N(e,n)})}(e,n),W(e,n);else if(null===e.chief){console.log("DECISION: ","The chief polity ".concat(e.name," deliberates"));var t=j(e,n);t&&C(e,t,n)?D(e,t,null,n):G(e,n)}else{var o=V(e,n);console.log("DECISION: ","".concat(o.name,"'s subordinate polity ").concat(e.name," deliberates")),T(o,e,n)?z(o,e,n):G(e,n)}return e},j=function(e,n){var t=A(e,n).filter(function(e){return!Z(e)}).map(function(e){return V(e,n)}).sort(function(e,t){return q(e,n)-q(t,n)});return t.length>0&&t[0]},I=function(e,n,t){return[e].concat(Object(c.a)(K(e,t))).reduce(function(e,t){return e+(o=n,r=t,M>=Math.hypot(r.coordinates.x-o.coordinates.x,r.coordinates.y-o.coordinates.y));var o,r},0)},A=function(e,n){return n.filter(function(t){return V(t,n).id!==e.id&&t.id!==e.id&&I(e,t,n)})},L=function(e,n){var t=[],o=K(e,n).sort(function(e,t){return q(t,n)-q(e,n)});o.length>4&&o.map(function(n,r){r>=4?t.push({chief:o[r-4],target:n}):t.push({chief:e,target:n})}),t.map(function(e){n.forEach(function(n){n.id===e.target.id&&(n.chief=e.chief.id)})})},N=function(e,n){var t=V(e,n);n.forEach(function(n){n.id===e.id?(console.log("SECESSION: ".concat(n.name," is seceded from ").concat(t.name,".")),n.chief=null):n.id===t.id&&(n.has_incurred_secession=!0)})},B=function(e,n){n.forEach(function(n){n.id===e.id&&(n.has_incurred_secession=!1,n.has_incurred_war=!1,n.chief_age+=1)})},C=function(e,n,t){var o=P(e,n,t),r=J(o);return Math.random()<=F(e,o,r)},T=function(e,n,t){var o=1-P(e,n,t);return Math.random()<=o},z=function(e,n,t){console.log("REBELLION: ","".concat(n.name," attempts rebellion against ").concat(e.name,"."));var o=P(e,n,t);H(1-o)?(console.log("REBELLION: ","".concat(n.name," succeeds.")),X(U(o),[e.id,n.id],t),N(n,t),L(V(e),t)):(console.log("REBELLION: ","".concat(n.name," fails.")),X(J(o),[e.id,n.id],t))},G=function(e,n){console.log("PEACE: ","".concat(e.name," has peace.")),$(Math.sign(e.baseline_resource_level-e.resource_level)*(e.baseline_resource_level/3),[e.id],n)},D=function e(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=function(e,n,t){var o=[];return(o=K(n,t).length>0?A(e,t).filter(function(e){return V(e,t).id===n.id}).sort(function(e,n){return q(n,t)-q(e,t)}):A(e,t).filter(function(e){return e.id===n.id})).length>0&&o[0]}(n,t,r);if(i){console.log("WAR: ","".concat(n.name," prepares for war against ").concat(t.name));var a=P(n,i,r);null===o&&(o=1-a),!H(o)?(console.log("WAR: ","".concat(n.name," succeeds in battle against ").concat(i.name)),X(J(a),[n.id,i.id],r),function(e,n,t){console.log("ANNEX: ","".concat(n.name," is annexed by ").concat(e.name,"."));var o=Q(n,t).map(function(e){return e.id});t.forEach(function(t){t.id===n.id&&(t.chief=e.id),o.indexOf(t.id)>-1&&(t.chief=null)})}(n,i,r),L(n,r),o-=.8*o,V(t,r).id!==n.id&&(console.log("WAR: ","".concat(n.name,"'s onslaught continues against ").concat(t.name)),e(n,t,o,r))):(console.log("WAR: ","".concat(n.name," fails in battle against ").concat(i.name)),X(U(a),[n.id,i.id],r))}else console.log("IMPASSE: ".concat(t.name," has no communities with reach of ").concat(n.name,"'s assualt."))},H=function(e){return Math.random()<=e},P=function(e,n,t){var o=Math.pow(q(e,t),2);return o/(o+Math.pow(q(n,t),2))},F=function(e,n,t){return n*Math.exp(-2*t)*(e.resource_level/e.baseline_resource_level)},J=function(e){return b*(1-e)},U=function(e){return b*e},X=function(e,n,t){t.forEach(function(t){n.indexOf(t.id)>-1&&(t.resource_level=Math.max(0,t.resource_level-e))})},$=function(e,n,t){t.forEach(function(t){n.indexOf(t.id)>-1&&(t.resource_level+=e)})},q=function(e,n){return Q(e,n).reduce(function(e,n){return e+.5*n.resource_level},0)+e.resource_level},K=function(e,n){return n.filter(function(t){return t.id!==e.id&&V(t,n).id===e.id})},Q=function(e,n){return n.filter(function(n){return n.id!==e.id&&n.chief===e.id})},V=function e(n,t){var o=!1,r=[];return null!==n.chief&&(r=t.filter(function(e){return e.id===n.chief})),r.length>0&&(o=r[0]),o?e(o,t):n};function Y(){var e=1+_(-1,1)*b;return{id:g()(),name:te([ee,ne]),baseline_resource_level:e,resource_level:e,chief:null,coordinates:{x:_(0,k),y:_(0,k)},has_incurred_secession:!1,has_incurred_war:!1,chief_age:30,color:x.a.Util.getRandomColor()}}var Z=function(e){return e.has_incurred_secession&&e.has_incurred_war},ee=["Moon","Sun","Black","White","Light","Shadow","Red","Green","Gray","Mighty","Wither","Gale","Hay","Stone","River"],ne=["Fire","Water","Belly","Peaks","Born","Still","Wood","Wine","Run","Guard","Fell","Fall"],te=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return w(e)}).join(" ")},oe=t(7),re=function(e){function n(){var e,t;Object(f.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=Object(h.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r)))).state={polities:S(10),offset_x:window.innerWidth/100-1,offset_y:window.innerHeight/100-1,base_size:10,size_multiplier:20},t}return Object(p.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.table(this.state.polities);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"step",value:function(){var e=Object(s.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(Object(c.a)(this.state.polities),1,0);case 2:n=e.sent,this.setState({polities:n});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=this.state.polities.map(function(n,t){var o=n.coordinates.x*e.state.offset_x,i=n.coordinates.y*e.state.offset_y,a=q(n,e.state.polities),c=e.state.size_multiplier*a+e.state.base_size,u=Q(n,e.state.polities).map(function(t,a){return r.a.createElement(oe.Group,null,r.a.createElement(oe.Line,{key:a+"b",x:0,y:0,points:[o,i,t.coordinates.x*e.state.offset_x,t.coordinates.y*e.state.offset_y],stroke:V(n,e.state.polities).color,tension:1,strokeWidth:4}))});return r.a.createElement(oe.Group,{key:t},r.a.createElement(oe.Text,{x:o,y:i+40,text:n.name,fill:"red",fontSize:20}),r.a.createElement(oe.Text,{x:o,y:i-20,text:Math.round(100*a)/100,fill:"red",fontSize:20}),r.a.createElement(oe.Rect,{x:o,y:i,width:c,height:c,fill:n.color,shadowBlur:5}),u)});return r.a.createElement(oe.Stage,{width:window.innerWidth,height:window.innerHeight},r.a.createElement(oe.Layer,null,r.a.createElement(oe.Rect,{x:20,y:20,width:100,height:50,fill:"red",onClick:function(){return e.step()}}),r.a.createElement(oe.Text,{x:50,y:40,text:"Step",fill:"black",fontSize:20}),n))}}]),n}(r.a.Component);var ie=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.a6894f7f.chunk.js.map